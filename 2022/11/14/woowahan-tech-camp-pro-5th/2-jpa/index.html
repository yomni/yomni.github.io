<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KG3X6VQ9');</script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Yomni">


    <meta name="subtitle" content="Hexo ê¸°ë°˜ì˜ ê¸°ìˆ  ë¸”ë¡œê·¸">


    <meta name="description" content="ê¸°ìˆ  ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.">



<title>JPA ë¯¸ì…˜ íšŒê³  | Yomniì˜ Y-Log</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


  <script src='https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'default'});
    }
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KG3X6VQ9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Yomni&#39;s Y-Log</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Yomni&#39;s Y-Log</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6;    // ä¸º 6 æ—¶å±•å¼€æ‰€æœ‰
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function () {
            tocbot.refresh(obj_merge(tocbot_default_config, { hasInnerContainers: true }));
        }, 420); // è¿™ä¸ªå€¼æ˜¯ç”± tocbot æºç é‡Œå®šä¹‰çš„ scrollSmoothDuration å¾—æ¥çš„
    }

    document.ready(function () {
        tocbot.init(obj_merge(tocbot_default_config, { collapseDepth: 1 }));
    });

    function expandToc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, { collapseDepth: expanded ? 1 : DEPTH_MAX }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">JPA ë¯¸ì…˜ íšŒê³ </h1>
            
                <div class="post-meta">
                    

                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/category/%EC%9A%B0%EC%95%84%ED%95%9C-%ED%85%8C%ED%81%AC-%EC%BA%A0%ED%94%84-pro-5%EA%B8%B0-%ED%9A%8C%EA%B3%A0%EB%A1%9D/">ìš°ì•„í•œ í…Œí¬ ìº í”„ Pro 5ê¸° íšŒê³ ë¡</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="JPA"><a href="#JPA" class="headerlink" title="JPA"></a>JPA</h2><p>ì´ë²ˆ ë¯¸ì…˜ì—ì„œëŠ” <code>JPA(Java Persistence API)</code>ì— ëŒ€í•´ ì§‘ì¤‘ì ìœ¼ë¡œ í•™ìŠµí•˜ê¸° ìœ„í•œ ë¯¸ì…˜ìœ¼ë¡œ,<br>QnA ê²Œì‹œíŒì˜ ë°±ì—”ë“œ ë¡œì§ì„ JPA ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ëª©ì ì´ì—ˆë‹¤.</p>
<p>ê° ë‹¨ê³„ë³„ë¡œ <code>ì—”í‹°í‹° ë§¤í•‘</code>, <code>ì—°ê´€ ê´€ê³„ ë§¤í•‘</code>, <code>ì§ˆë¬¸ ì‚­ì œí•˜ê¸° ë¦¬íŒ©í„°ë§</code>ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì—ˆê³ ,<br><code>ì—”í‹°í‹° ë§¤í•‘</code>, <code>ì—°ê´€ ê´€ê³„ ë§¤í•‘</code> ë‹¨ê³„ì—ì„  ê° ë‹¨ê³„ì˜ ì œëª©ëŒ€ë¡œ ìš”êµ¬ì‚¬í•­ì´ ì£¼ì–´ì¡Œë‹¤.  </p>
<p>QnA ì„œë¹„ìŠ¤ëŠ” <code>User</code>, <code>Question</code>, <code>Answer</code>, <code>DeleteHistory</code> ì´ 4ê°œì˜ ë„ë©”ì¸ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆì—ˆìœ¼ë©°,<br>ë§ˆì§€ë§‰ <code>ì§ˆë¬¸ ì‚­ì œí•˜ê¸° ë¦¬í™í„°ë§</code>ì˜ ê²½ìš° <strong><em>â€˜ë³¸ì¸ì´ ì‘ì„±í•œ ì§ˆë¬¸ê³¼ ë‹µê¸€ë§Œ ì‚­ì œí•  ìˆ˜ ìˆê³ , ì´ ì´ë ¥ì„ DeleteHistoryì—<br>ì €ì¥í•´ì•¼ í•œë‹¤.â€™</em></strong> ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì´ì—ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ <code>ì‚­ì œ</code>ë¼ê³  í•´ì„œ DBì—ì„œ rowê°€ ì‚­ì œë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, <code>ì‚­ì œ ìƒíƒœ(deleted = true)</code>ë¡œ ë§Œë“œëŠ” ê²ƒì´ë¼,<br>DBì—ì„œëŠ” updateê°€ ë˜ëŠ” ê²ƒì´ê³ , delete_history í…Œì´ë¸”ì—ëŠ” insertê°€ ë˜ëŠ”ê²ƒì´ë¯€ë¡œ ë„ë©”ì¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì˜ ì²˜ë¦¬í•´ì¤˜ì•¼ í•œë‹¤.<br>ë˜í•œ, ì´ì „ ë‹¨ê³„ì—ì„œ ì—”í‹°í‹° ë§¤í•‘ê³¼ ì—°ê´€ ê´€ê³„ ë§¤í•‘ì„ ì˜ ì²˜ë¦¬í•´ë†¨ì–´ì•¼ 3ë‹¨ê³„ì—ì„œ ë¹„êµì  ë§¤ë„ëŸ½ê²Œ ì§„í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.  </p>
<p>3ë‹¨ê³„ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì´ì „ì— í•™ìŠµí–ˆë˜ TDD, Refactoring ë°©ë²•ë“±ì„ ì ê·¹ í™œìš©í•˜ì—¬<br>ì´ë²ˆ ë¯¸ì…˜ì„ ë¬´ë‚œí•˜ê²Œ ì§„í–‰ í•  ìˆ˜ ìˆì—ˆë‹¤</p>
<h2 id="íšŒê³ "><a href="#íšŒê³ " class="headerlink" title="íšŒê³ "></a>íšŒê³ </h2><h3 id="ì´ë²ˆ-ë¯¸ì…˜ì—ì„œ-ì˜-í•œ-ì "><a href="#ì´ë²ˆ-ë¯¸ì…˜ì—ì„œ-ì˜-í•œ-ì " class="headerlink" title="ì´ë²ˆ ë¯¸ì…˜ì—ì„œ ì˜ í•œ ì "></a>ì´ë²ˆ ë¯¸ì…˜ì—ì„œ ì˜ í•œ ì </h3><h4 id="ì—”í‹°í‹°-ë§¤í•‘-ë°-ì—°ê´€ê´€ê³„-ë§¤í•‘"><a href="#ì—”í‹°í‹°-ë§¤í•‘-ë°-ì—°ê´€ê´€ê³„-ë§¤í•‘" class="headerlink" title="ì—”í‹°í‹° ë§¤í•‘ ë° ì—°ê´€ê´€ê³„ ë§¤í•‘"></a>ì—”í‹°í‹° ë§¤í•‘ ë° ì—°ê´€ê´€ê³„ ë§¤í•‘</h4><p>QnAì˜ ì‹œìŠ¤í…œ ì¤‘ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ ê°„ë‹¨íˆ ê·¸ë ¤ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<img src="/2022/11/14/woowahan-tech-camp-pro-5th/2-jpa/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EB%A7%A4%ED%95%91.jpeg" class="">

<p><code>DeleteHistory</code>ë¼ëŠ” ì—”í‹°í‹°ì˜ ì±…ì„ì— ëŒ€í•œ ê³ ë¯¼ì´ ë§ì•˜ë‹¤.<br>ì†ì„±ì¤‘ì— content_id ë¼ëŠ” Question &#x2F; Answerì˜ idë¥¼ ê°€ì§€ê³  ìˆì—ˆìœ¼ë‚˜,<br>ì´ ì—”í‹°í‹°ì˜ ì—­í• ë¡œ ë³´ë©´ <strong><em>Historyë¼ëŠ” ì¸¡ë©´ì—ì„  ì—°ê´€ ê´€ê³„ë¥¼ ë§ºì§€ ì•Šì•˜ë‹¤.</em></strong></p>
<p>ì´ë ‡ê²Œ ì„¤ê³„í•œ ì—°ê´€ ê´€ê³„ê°€ 3ë‹¨ê³„ì—ì„œ ê½¤ë‚˜ ìœ ì—°í•˜ê²Œ ì„¤ê³„í•  ìˆ˜ ìˆëŠ” ë°‘ê±°ë¦„ì´ ë˜ì—ˆë‹¤.<br>ì—”í‹°í‹° ë§¤í•‘ê³¼ ì—°ê´€ê´€ê³„ ë§¤í•‘ ë‹¨ê³„ê°€ JPAë¥¼ ì˜ ì•Œì•˜ë˜ ì‚¬ëŒì´ë¼ë©´ ê¸ˆë°© ëë‚¼ ìˆ˜ ìˆëŠ” ë¯¸ì…˜ì´ì§€ë§Œ,<br><strong><em>ê° ì—”í‹°í‹°ì˜ ì—­í• ê³¼ ì±…ì„ì„ ì ì ˆíˆ ê³ ë ¤í•˜ì—¬ ì—°ê´€ê´€ê³„ ë§¤í•‘ì„ í•´ì¤˜ì•¼ í•œë‹¤ëŠ” ì </em></strong> ì—ì„œ<br>ê½¤ë‚˜ ì˜¤ë«ë™ì•ˆ ê³ ë¯¼í•˜ë©° ì„¤ê³„í–ˆë˜ ê²ƒì´ ë„ì›€ì´ ë§ì´ ë˜ì—ˆë‹¤.</p>
<h3 id="ì–´ë ¤ì› ë˜-ì "><a href="#ì–´ë ¤ì› ë˜-ì " class="headerlink" title="ì–´ë ¤ì› ë˜ ì "></a>ì–´ë ¤ì› ë˜ ì </h3><h4 id="ì—”í‹°í‹°-ì„¤ê³„ì—-ëŒ€í•œ-ê¹Šì€-ê³ ë¯¼"><a href="#ì—”í‹°í‹°-ì„¤ê³„ì—-ëŒ€í•œ-ê¹Šì€-ê³ ë¯¼" class="headerlink" title="ì—”í‹°í‹° ì„¤ê³„ì— ëŒ€í•œ ê¹Šì€ ê³ ë¯¼"></a>ì—”í‹°í‹° ì„¤ê³„ì— ëŒ€í•œ ê¹Šì€ ê³ ë¯¼</h4><h5 id="Question-ì—”í‹°í‹°"><a href="#Question-ì—”í‹°í‹°" class="headerlink" title="Question ì—”í‹°í‹°"></a>Question ì—”í‹°í‹°</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;question&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Question</span> <span class="keyword">extends</span> <span class="title class_">BaseDateTimeEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">CONTENT_DELETED_FLAG</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCEPTION_MESSAGE_FOR_CANNOT_DELETE</span> <span class="operator">=</span> <span class="string">&quot;ì§ˆë¬¸ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.&quot;</span>;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@Column(nullable = false, length = 100)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="meta">@Lob</span></span><br><span class="line">    <span class="keyword">private</span> String contents;</span><br><span class="line">    <span class="meta">@ManyToOne(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;writer_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_question_writer&quot;))</span></span><br><span class="line">    <span class="keyword">private</span> User writer;</span><br><span class="line">    <span class="meta">@Embedded</span></span><br><span class="line">    <span class="keyword">private</span> Answers answers;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">deleted</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Answer-ì—”í‹°í‹°"><a href="#Answer-ì—”í‹°í‹°" class="headerlink" title="Answer ì—”í‹°í‹°"></a>Answer ì—”í‹°í‹°</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;answer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Answer</span> <span class="keyword">extends</span> <span class="title class_">BaseDateTimeEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">CONTENT_DELETED_FLAG</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCEPTION_MESSAGE_FOR_CANNOT_DELETE</span> <span class="operator">=</span> <span class="string">&quot;ì§ˆë¬¸ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCEPTION_MESSAGE_FOR_DUPLICATION_QUESTION</span> <span class="operator">=</span> <span class="string">&quot;ì´ë¯¸ ë‹¤ë¥¸ ì§ˆë¬¸ì— ë‹¬ë ¤ìˆëŠ” ë‹µê¸€ì…ë‹ˆë‹¤.&quot;</span>;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@ManyToOne(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;writer_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_answer_writer&quot;))</span></span><br><span class="line">    <span class="keyword">private</span> User writer;</span><br><span class="line">    <span class="meta">@ManyToOne(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;question_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_answer_to_question&quot;))</span></span><br><span class="line">    <span class="keyword">private</span> Question question;</span><br><span class="line">    <span class="meta">@Lob</span></span><br><span class="line">    <span class="keyword">private</span> String contents;</span><br><span class="line">    <span class="meta">@Column(nullable = false)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">deleted</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ë‘ ì—”í‹°í‹°ë¥¼ ë³´ë©´ ê³µí†µì ìœ¼ë¡œ <code>content</code>, <code>writer</code>, <code>id</code>, <code>deleted</code> ë¼ëŠ” ì†ì„±ì„ ê°€ì§€ê³  ìˆë‹¤.</p>
<p>ë‚˜ëŠ” ì²˜ìŒì— <strong><em>ì¤‘ë³µ ì½”ë“œë¥¼ ìµœëŒ€í•œ ë°°ì œí•˜ì</em></strong> ë¼ëŠ” ìƒê°ìœ¼ë¡œ ê³µí†µëœ ì†ì„±ì„ í•˜ë‚˜ì˜<br><code>BaseContentEntity</code>ë¼ëŠ” <code>@MappedSuperclass</code>ë¡œ ë¶„ë¦¬í•˜ì—¬, ì´ë¥¼ ìƒì†ë°›ëŠ” êµ¬ì¡°ë¡œ êµ¬í˜„ì„ í–ˆë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MappedSuperclass</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseContentEntity</span> <span class="keyword">extends</span> <span class="title class_">BaseDateTimeEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">CONTENT_DELETED_FLAG</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCEPTION_MESSAGE_FOR_CANNOT_DELETE</span> <span class="operator">=</span> <span class="string">&quot;ì§ˆë¬¸ì„ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.&quot;</span>;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@Lob</span></span><br><span class="line">    <span class="keyword">private</span> String contents;</span><br><span class="line">    <span class="meta">@Column(nullable = false)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">deleted</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="meta">@ManyToOne(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;writer_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> User writer;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>í•˜ì§€ë§Œ, ë¦¬ë·°ì–´ë‹˜ì˜ í”¼ë“œë°±ì€ <code>BaseContentEntity</code>ëŠ” ê³¼ë„í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆëŠ” ìŠˆí¼í´ë˜ìŠ¤ê°€ ë˜ì–´ ë²„ë ¸ê³ ,<br>ì¶”ê°€ í™•ì¥ì— ìœ ì—°í•˜ì§€ ëª»í•  ê²ƒ ê°™ë‹¤ëŠ” ì˜ê²¬ì„ ì£¼ì‹œë©° ë‚´ ìƒê°ì´ ì–´ë– í•œì§€ ë¬¼ì–´ë³´ì…¨ë‹¤.ğŸ˜…</p>
<img src="/2022/11/14/woowahan-tech-camp-pro-5th/2-jpa/BaseContentEntity_review_comment.jpeg" class="">

<p>ê° ì†ì„±ì— ëŒ€í•´ ë‹¤ì‹œ í•œë²ˆ ê³ ë¯¼ í•´ ë³¸ ê²°ê³¼</p>
<ul>
<li>id : ë³€ê²½ì— ìœ ì—°í•˜ì§€ ëª»í•˜ê³ , MappedSuperclass ë³´ë‹¤ëŠ” ì´ë¥¼ ìƒì†ë°›ëŠ” ê·¼ë³¸ Entityê°€ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ë” ë°”ëŒì§í•˜ë‹¤.  </li>
<li>writer : Question &#x2F; Answerì˜ writerëŠ” ë‚˜ì¤‘ì— ë‹¤ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì ìš©ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.</li>
<li>deleted : ì´ë¯¸ 3ë‹¨ê³„ ë¯¸ì…˜ì—ì„œ ìš”êµ¬ì‚¬í•­ì´ ë‹¤ë¦„(ì‚­ì œì— í•„ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë‹¤ë¥´ê²Œ ì „ê°œë¨).<br>ë”°ë¼ì„œ, ë§Œì•½ ê³µí†µ ì†ì„±ìœ¼ë¡œ ëº€ë‹¤ë©´ <code>content</code>ë§Œ ë‚¨ê²Œ ëœë‹¤.</li>
</ul>
<p>ê·¸ë ‡ë‹¤ë©´ ì¶”ê°€ë¡œ ê³ ë¯¼í•´ë³¼ ê²ƒì´, <code>content</code>ê°€ ê³µí†µ ì†ì„±ìœ¼ë¡œ ëº„ë§Œí•œ ê°€ì¹˜ê°€ ìˆëŠ”ê°€?<br>â€“&gt; ê·¸ë ‡ì§€ ì•Šë‹¤ëŠ”ê²Œ ë‚˜ì˜ ê²°ë¡ ì´ì—ˆë‹¤. contentëŠ” ê³µí†µ ì†ì„±ìœ¼ë¡œ ëº„ë§Œí•œ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—†ê±°ë‹ˆì™€,<br>ë§Œì¼ ëº€ë‹¤ê³  í–ˆì„ë•Œ êµ¬í˜„ ë³µì¡ë„ê°€ ì˜¤íˆë ¤ ì¦ê°€í•œë‹¤ëŠ” ê²°ë¡ ì„ ë‚´ë¦¬ê³ , BaseContentEntityë¥¼ ì•„ì˜ˆ ì‚­ì œí•˜ëŠ” ì‹ìœ¼ë¡œ ë‹¤ì‹œ ì›ë³µí–ˆë‹¤..ğŸ˜­</p>
<p>ì´ì œì™€ì„œ ë‹¤ì‹œ ìƒê°í•´ë³´ë©´, ë‹¨ì¼ ì±…ì„ì˜ ì›ì¹™ìœ¼ë¡œ ê³ ë ¤í•´ë´¤ì„ ë•Œ<br><code>BaseContentEntity</code>ëŠ” <code>content</code>ì™€ ê´€ë ¨ëœ <strong>ì—­í• </strong>ê³¼ <strong>ì±…ì„</strong>ë§Œ ê°€ì§€ê³  ìˆì–´ì•¼ ëë‹¤.   </p>
<h3 id="ëŠë‚€ì "><a href="#ëŠë‚€ì " class="headerlink" title="ëŠë‚€ì "></a>ëŠë‚€ì </h3><p>ì´ë²ˆ ë¯¸ì…˜ì„ ì§„í–‰í•˜ë©´ì„œ ê°€ì¥ í¬ê²Œ ëŠë‚€ì ì€ <strong><em>JPAëŠ” DataBaseë¥¼ ìœ„í•œ ê¸°ìˆ ì´ ì•„ë‹ˆë¼, ê°ì²´ì§€í–¥ì„¤ê³„ë¥¼ ìœ„í•œ ê¸°ìˆ </em></strong> ì´ë¼ëŠ” ê²ƒì´ë‹¤.  </p>
<ul>
<li>ê° ì†ì„±ì„ ì–´ë–»ê²Œ ë§¤í•‘í•˜ëŠ”ì§€</li>
<li>ì—°ê´€ ê´€ê³„ëŠ” ì–´ë””ì„œ ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ(<strong>DBì˜ ê´€ê³„ì—ì„  ë°©í–¥ì´ ì—†ë‹¤.</strong>) ë§¤í•‘í•´ì•¼ í•˜ëŠ”ì§€</li>
<li>ì‹œìŠ¤í…œì˜ ì„¤ê³„ ìƒ ì–´ë–¤ ì„ì˜ì˜ ë„ë©”ì¸ì´ ë‹¤ë¥¸ ë„ë©”ì¸ê³¼ ìì£¼ ì‚¬ìš©ë˜ëŠ”ì§€ì— ë”°ë¼ ë³€ê²½ì´ ì˜ˆìƒë˜ëŠ” ë¶€ë¶„ì„ ê³ ë ¤<br>í•˜ëŠ” ë“±ë“±.. ì—¬ëŸ¬ ê°€ì§€ ì¸¡ë©´ì—ì„œ ë´¤ì„ ë•Œ, JPAë„ ê²°êµ­ì€ ê°ì²´ì§€í–¥ì„ ìœ„í•œ ê¸°ìˆ  ì´ë¼ëŠ” ê²ƒì´ì—ˆë‹¤.</li>
</ul>
<p>ì´ ë¶€ë¶„ì„ í¬ê²Œ ê°„ê³¼í•˜ê³  ì´ë²ˆ ë¯¸ì…˜ì— ì„í–ˆë˜ ê²ƒì´ ë§ì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ì•¼ê¸°ì‹œì¼°ë‹¤.<br><strong><em>JPA ì‚¬ìš© ì‹œ <code>ì—”í‹°í‹° ë§¤í•‘</code>, <code>ì—°ê´€ ê´€ê³„ ë§¤í•‘</code>ë‹¨ê³„ ì—ì„œëŠ” ë°˜ë“œì‹œ ê°ì²´ì§€í–¥ì ì¸ ì„¤ê³„ë¥¼ ë™ë°˜í•´ì•¼ í•œë‹¤!</em></strong> </p>
<h2 id="ìƒê°í•´ë³´ì"><a href="#ìƒê°í•´ë³´ì" class="headerlink" title="ìƒê°í•´ë³´ì"></a>ìƒê°í•´ë³´ì</h2><p>ì´ë²ˆ ë¯¸ì…˜ì„ ì™„ë£Œ í•œ ì‹œì ì— â€˜ì¢‹ì€ ê°ì²´ì§€í–¥ ì„¤ê³„ë€ ë¬´ì—‡ì¸ê°€?â€™ ë¼ëŠ” ì˜ë¬¸ì´ ìƒê²¼ë‹¤.<br>ì´ ì§ˆë¬¸ì— ëŒ€í•œ ì¢‹ì€ ë‹µì„ ë‚´ê³  ìˆëŠ” ì±…ì„ ì°¾ê²Œ ë˜ì—ˆë‹¤.<br>ë°”ë¡œ â€˜ê°ì²´ì§€í–¥ì˜ ì‚¬ì‹¤ê³¼ ì˜¤í•´ - ì¡°ì˜í˜¸ ì§€ìŒ(ìœ„í‚¤ë¶ìŠ¤)â€™ ì´ë‹¤.  </p>
<p>ê°œì¸ì ìœ¼ë¡  ì´ ì±…ì„ ì½ìœ¼ë©° ì±…ì˜ ì œëª© ê·¸ëŒ€ë¡œ<br>ë‚´ê°€ ê°ì²´ì§€í–¥ì— ëŒ€í•´ ì˜ëª» ì•Œê³  ìˆëŠ” ë¶€ë¶„ì´ ë§ì•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.<br>ìœ„ ì±…ì— ëŒ€í•œ ë…í›„ê°ì€ ë‹¤ë¥¸ í¬ìŠ¤íŠ¸ì—ì„œ ì¢€ ë” ìì„¸íˆ ë‹¤ë¤„ ë³¼ ì˜ˆì •ì´ë‹¤.</p>
<p>ë˜í•œ, ê¸°ìˆ ì ìœ¼ë¡œ ë°”ë¡œ ë„ì…í•´ë³¼ ìˆ˜ ìˆëŠ” ê²ƒë“¤ì€..<br>ì ì–´ë„ ì–´ë–¤ ê°œë°œì´ë¼ë„ ê°ì²´ì§€í–¥ì˜ 5ëŒ€ ì›ì¹™(SOLID)ë¥¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ì–´ì„œ,<br>ì›ì¹™ì„ ì˜ ì§€í‚¤ê³  ìˆëŠ”ì§€ë¥¼ ì²´í¬í•˜ê³  ë„˜ì–´ê°€ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤.ğŸ§</p>
<h2 id="JPAë¥¼-í•™ìŠµí•˜ê¸°-ìœ„í•œ-Howì—-ëŒ€í•œ-ì¶”ì²œ"><a href="#JPAë¥¼-í•™ìŠµí•˜ê¸°-ìœ„í•œ-Howì—-ëŒ€í•œ-ì¶”ì²œ" class="headerlink" title="JPAë¥¼ í•™ìŠµí•˜ê¸° ìœ„í•œ Howì— ëŒ€í•œ ì¶”ì²œ"></a>JPAë¥¼ í•™ìŠµí•˜ê¸° ìœ„í•œ Howì— ëŒ€í•œ ì¶”ì²œ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.inflearn.com/course/ORM-JPA-Basic">Inflearn : ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë° - ê¸°ë³¸í¸(ê¹€ì˜í•œ)</a></li>
<li><a target="_blank" rel="noopener" href="http://www.yes24.com/Product/Goods/19040233">ì±… : ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°</a></li>
<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/ssusere4d67c/jpa-56081624">ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¡œ ë³´ëŠ” JPA</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PL9mhQYIlKEhfpMVndI23RwWTL9-VL-B7U">í† í¬ON JPAí”„ë¡œê·¸ë˜ë° ê¸°ë³¸ê¸° ë‹¤ì§€ê¸°</a></li>
</ul>

        </div>

        
        <div class="comments">
            <script>
                // load utteranc comment
                const currentTheme = window.localStorage && window.localStorage.getItem('theme');

                let theme = currentTheme === 'dark' ? 'github-dark' : 'github-light';
                let s = document.createElement('script');
                s.src = 'https://utteranc.es/client.js';
                s.setAttribute('repo', 'yomni/yomni.github.io');
                s.setAttribute('issue-term', 'pathname');
                s.setAttribute('theme', theme);
                s.setAttribute('crossorigin', 'anonymous');
                s.setAttribute('async', '');
                document.querySelector('div.comments').innerHTML = '';
                document.querySelector('div.comments').appendChild(s);
            </script>
        </div>
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tag/%EC%9A%B0%ED%85%8C%EC%BA%A0pro/"># ìš°í…Œìº Pro</a>
                    
                        <a href="/tag/jpa/"># JPA</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2022/11/27/woowahan-tech-camp-pro-5th/3-atdd/">ATDD(ì¸ìˆ˜í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ) ë¯¸ì…˜ íšŒê³ </a>
            
            
            <a class="next" rel="next" href="/2022/11/10/woowahan-tech-camp-pro-5th/1-tdd-refactoring/">TDD, Refactoring ë¯¸ì…˜ íšŒê³ </a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© <a href="https://yomni.github.io/" target="_blank">Yomni</a> | Powered by <a href="https://hexo.io" target="_blank">Hexo</a></span>
    </div>
</footer>

    </div>
</body>

</html>
